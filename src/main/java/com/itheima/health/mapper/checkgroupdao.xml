<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itheima.health.dao.checkgroupdao">

    <insert id="insert" parameterType="checkGroup">
insert into itcast_health.t_checkgroup(t_checkgroup.code, t_checkgroup.name, t_checkgroup.helpCode, t_checkgroup.sex, t_checkgroup.remark, t_checkgroup.attention)
values (#{code},#{name},#{helpCode},#{sex},#{remark},#{attention})
    </insert>
    <insert id="InsertIntoRelationalTable">
insert into     itcast_health.t_checkgroup_checkitem(t_checkgroup_checkitem.checkgroup_id, t_checkgroup_checkitem.checkitem_id)
values (#{checkgroupid},#{checkitemid})
    </insert>

    <update id="edit" parameterType="checkGroup">
        update itcast_health.t_checkgroup
        set code=#{code},
        name=#{name},
        remark=#{remark},
        sex=#{sex},
        helpCode=#{helpCode}
        where id=#{id}
    </update>
    <delete id="deleteBycheckGroup">
        delete
        from itcast_health.t_checkgroup_checkitem
        where t_checkgroup_checkitem.checkgroup_id=#{id};
    </delete>
    <delete id="delete">
        delete from itcast_health.t_checkgroup where t_checkgroup.id=#{id}
    </delete>
    <delete id="Deleterelationtable">
        delete from itcast_health.t_setmeal_checkgroup where t_setmeal_checkgroup.checkgroup_id=#{id}
    </delete>

    <select id="selectByConditon" resultType="com.itheima.health.pojo.CheckGroup" parameterType="string">
        select * from itcast_health.t_checkgroup
        <if test="queryString != null and queryString.length > 0">
        where code like concat('%',#{queryString},'%') or name like concat('%',#{queryString},'%') or helpCode like concat('%',#{queryString},'%')
        </if>
    </select>
    <select id="findByName" resultType="com.itheima.health.pojo.CheckGroup">
        select *
        from t_checkgroup  where t_checkgroup.name=#{name};
    </select>
    <select id="findById"  resultType="checkGroup">
        select *
        from t_checkgroup where t_checkgroup.id=#{id};
    </select>
    <select id="findCheckItemIdsByCheckGroupId" resultType="java.lang.Integer">
        select t_checkgroup_checkitem.checkitem_id
        from t_checkgroup_checkitem where t_checkgroup_checkitem.checkgroup_id=#{id};
    </select>
    <select id="countCheckItemIdByCheckGroup" resultType="integer">
        select count(1) from itcast_health.t_setmeal_checkgroup tsc where checkgroup_id=#{id};
    </select>

</mapper>